sources:
  omv:
    type: OMV
    max_zoom: 17
    min_display_zoom: 1
    tiled: true

scene:
  background:
    color: global.land_color
  sky:
    zenith: '#347BC0'
    horizon: '#EDF2F9'
    fog: '#FFFFFF'

global:
  text_font_family: FiraGO, DroidSans

  text_visible_admin: true
  icon_visible_populated_places: true
  text_visible_populated_places: true
  text_visible_neighbourhoods: true
  text_visible_water_labels: true
  text_visible_building: true
  text_visible_address: true
  text_visible_roads: true
  text_visible_ferry: true
  shields_visible: true

  icon_size: [[10, '20px'], [17, '24px']]

  ux_language_text_source: |
    function() {
      return (global.ux_language && feature['name:' + global.ux_language]) ||
          (global.ux_language_fallback && feature['name:'+global.ux_language_fallback]) ||
          feature['name'];
    }
  ux_language_text_source_short: |
    function() {
        return (global.ux_language && feature['name:short:'+global.ux_language]) || (global.ux_language_fallback && feature['name:short:'+global.ux_language_fallback]) || feature['name:short'];
    }
  ux_language_text_source_left: |
    function() {
        // if a ux_langauge has been defined use that, else if there is feature name in the fallback_ux_language then use that, else use the feature's default name in the local language
        return (global.ux_language && feature['name:left:'+global.ux_language]) || (global.ux_language_fallback && feature['name:left:'+global.ux_language_fallback]) || feature['name:left'];
    }
  ux_language_text_source_right: |
    function() {
        // if a ux_langauge has been defined use that, else if there is feature name in the fallback_ux_language then use that, else use the feature's default name in the local language
        return (global.ux_language && feature['name:right:'+global.ux_language]) || (global.ux_language_fallback && feature['name:right:'+global.ux_language_fallback]) || feature['name:right'];
    }
  ux_language_text_source_boundary_lines_left_right:
    left: global.ux_language_text_source_left
    right: global.ux_language_text_source_right
  ux_language_text_source_boundary_lines: |
    function() {
        var right = (global.ux_language && feature['name:right:'+global.ux_language]) || (global.ux_language_fallback && feature['name:right:'+global.ux_language_fallback]) || feature['name:right'];
        var left = (global.ux_language && feature['name:left:'+global.ux_language]) || (global.ux_language_fallback && feature['name:left:'+global.ux_language_fallback]) || feature['name:left'];
        if (right && left) {
            return left + " - " + right;
        } else {
            return (global.ux_language && feature['name:'+global.ux_language]) || (global.ux_language_fallback && feature['name:'+global.ux_language_fallback]) || feature.name;
        }
    }
  ux_language_text_source_ocean: |
    function() {
        var name = (global.ux_language && feature['name:'+global.ux_language]) || (global.ux_language_fallback && feature['name:'+global.ux_language_fallback]) || feature['name'] || '';
        name = name.split(' ').join('\n');
        return name.split('').join(' ');
    }
  feature_min_zoom_filter: function() { return feature.min_zoom === undefined || $zoom >= feature.min_zoom }
  building_extrude_height: |
    function() {
      if (feature.min_height) {
        return feature.height - feature.min_height;
      } else if (!feature.height) {
        return 5; // default extrusion
      }
      return feature.height;
    }
  # default order for basemap features
  feature_order: |
    function() {
      if (feature.sort_rank) {
        return feature.sort_rank
      } else {
        // console.warn("WARNING: Missing sort_rank!", feature);
        return 0;
      }
    }
  feature_priority: function() { return feature.priority; }
  roads_cap: function() { return ($zoom >= 15 && 'round') || 'butt'; }

  # Define the minimum zoom level filters. Filters determine on which level data should be loaded.
  min_zoom_filter:
    rail: { $zoom: { min: 10 } }
    minor_road: { $zoom: { min: 13 } }
    path: { $zoom: { min: 14 } }

  # Define when to render data. In contrast to min_zoom_filter, this does not affect data loading.
  # It blends in data, starting at the defined level. This allows us to fine-tune visual density and
  # the amount of draw-calls.
  min_render_zooms:
    minor_road: 13.5
    major_road_tertiary: 9.5

  population:
    class1-1m-up: {min: 1000000}
    class2-250k-1m: { min: 250000, max: 1000000 }
    class3-100k-250k: { min: 100000, max: 250000 }
    class4-30k-100k: { min: 30000, max: 100000 }
    class5-until-30k: { max: 30000 }

  place_class1_color: [
  [0, 'rgb(250, 253, 255)'],
  [10, 'rgba(250, 253, 255, .88)'],
  [11, 'rgba(250, 253, 255, .78)'],
  [12, 'rgba(250, 253, 255, .78)'],
  [13, 'rgba(250, 253, 255, .72)']
  ]
  place_class1_outline_color: [
  [0, 'rgba(50,50,50, .01)'],
  [5, 'rgba(50,50,50, .47)'],
  [7, 'rgba(50,50,50, .58)'],
  [8, 'rgba(50,50,50, .7)']
  ]
  place_class2_color: [
  [0, 'rgb(250, 253, 255)'],
  [10, 'rgba(250, 253, 255, .86)'],
  [11, 'rgba(250, 253, 255, 0.78)'],
  [12, 'rgba(250, 253, 255, 0.78)'],
  [13, 'rgba(250, 253, 255, 0.70)'],
  [14, 'rgba(250, 253, 255, 0.58)']
  ]
  place_class2_outline_color: [
  [0,  'rgba(50,50,50, .01)'],
  [4,  'rgba(50,50,50, .01)'],
  [5,  'rgba(50,50,50, .47)'],
  [6,  'rgba(50,50,50, .47)'],
  [7,  'rgba(50,50,50, .58)'],
  [8,  'rgba(50,50,50, .70)'],
  [11, 'rgba(50,50,50, .70)'],
  [12, 'rgba(50,50,50, .70)']
  ]
  place_class3_color: [
  [0, 'rgb(250, 253, 255)'],
  [11, 'rgba(250, 253, 255, .78)'],
  [12, 'rgba(250, 253, 255, .70)'],
  [12, 'rgba(250, 253, 255, .70)'],
  [14, 'rgba(250, 253, 255, .58)']
  ]
  place_class3_outline_color: [
  [0,  'rgba(50,50,50, .07)'],
  [4,  'rgba(50,50,50, .07)'],
  [5,  'rgba(50,50,50, .47)'],
  [6,  'rgba(50,50,50, .47)'],
  [7,  'rgba(50,50,50, .58)'],
  [8,  'rgba(50,50,50, .70)'],
  [11, 'rgba(50,50,50, .70)'],
  [12, 'rgba(50,50,50, .70)']
  ]
  place_class4_color: [
  [0, 'rgb(250, 253, 255)'],
  [11, 'rgb(250, 253, 255)'],
  [12, 'rgba(250, 253, 255, .86)'],
  [13, 'rgba(250, 253, 255, .78)'],
  [14, 'rgba(250, 253, 255, .70)']
  ]
  place_class4_outline_color: [
  [0,  'rgba(50,50,50, .07)'],
  [4,  'rgba(50,50,50, .07)'],
  [5,  'rgba(50,50,50, .47)'],
  [6,  'rgba(50,50,50, .47)'],
  [7,  'rgba(50,50,50, .58)'],
  [8,  'rgba(50,50,50, .70)'],
  [13, 'rgba(50,50,50, .70)'],
  [14, 'rgba(50,50,50, .70)']
  ]
  place_class5_color: [
  [0, 'rgb(250, 253, 255)'],
  [6, 'rgb(250, 253, 255)'],
  [11, 'rgb(250, 253, 255)'],
  [12, 'rgba(250, 253, 255, .86)'],
  [13, 'rgba(250, 253, 255, .78)'],
  [14, 'rgba(250, 253, 255, .70)']
  ]
  place_class5_outline_color: [
  [0,  'rgba(50,50,50, .07)'],
  [4,  'rgba(50,50,50, .07)'],
  [5,  'rgba(50,50,50, .47)'],
  [6,  'rgba(50,50,50, .47)'],
  [7,  'rgba(50,50,50, .58)'],
  [8,  'rgba(50,50,50, .70)'],
  [13, 'rgba(50,50,50, .70)'],
  [14, 'rgba(50,50,50, .70)']
  ]
  place_capital_color: [
  [0, 'rgb(250, 253, 255)'],
  [7, 'rgb(250, 253, 255)'],
  [10, 'rgba(250, 253, 255, .9)'],
  [11, 'rgba(250, 253, 255, .7)']
  ]
  place_capital_outline_color: [
  [0, "rgba(50,50,50, .1)"],
  [5, "rgba(50,50,50, .5)"],
  [7, "rgba(50,50,50, .6)"],
  [8, "rgba(50,50,50, .7)"]
  ]

  place_hamlet_color: rgb(240, 244, 245)
  place_hamlet_outline_color: [
  [0,  'rgba(70, 70, 70, .78)'],
  [11, 'rgba(70, 70, 70, .78)'],
  [12, 'rgba(70, 70, 70, .70)'],
  [13, 'rgba(70, 70, 70, .70)'],
  [14, 'rgba(70, 70, 70, .62)']
  ]

  #global map colours
  land_color: rgb (245, 248, 250)
  water_label_outline_color: rgba(15, 50, 90, .47)
  water_label_sea_color: rgb(95,146,222)
  water_label_lake_color: rgb(161,199,242)
  water_label_lake_outline_color: rgba(30,95,171, .47)
  water_label_ocean_color: rgb(77, 147, 221)
  water_label_bay_color: rgb(161,199,242)
  water_label_bay_outline_color: rgba(34, 105, 191, .47)

  landuse_default_label_color: rgb(247, 247, 247)
  landuse_default_label_outline_color: rgb(50,50,50)
  landuse_label_size: [[12, 10px], [13, 11px], [15, 11px], [16, 12px]]
  landuse_park_label_color: rgb(100, 160, 120)
  landuse_park_label_outline_color: rgba(55, 70, 55, .58)
  landuse_forest_label_color: rgb(78,133,93)
  landuse_forest_label_outline_color: rgba(55,55,55,.58)
  # used for industrial, railway, parking, commercial, zoo, aerodrome, etc.
  landuse_gray_label_color: rgb(235,243,250)
  landuse_gray_label_outline_color: rgba(63,81,100,.58)

  landuse_pedestrian_label_color: rgb(235,243,250)

  landuse_pedestrian_label_outline_color: rgba(156,165,181,.58)
  landuse_hospital_label_color: rgb(245,237,240)

  landuse_hospital_label_outline_color: rgba(103,90,99,.58)
  landuse_golf_course_label_color: rgb(215,242,205)
  landuse_golf_course_label_outline_color: rgba(62,120,110,.58)

  landuse_beach_label_color: rgb(250,240,170)
  landuse_beach_label_outline_color: rgba(115,114,94,.58)
  landuse_university_label_color: rgb(240,237,232)

  landuse_university_label_outline_color: rgba(95,100,110,.58)

  landuse_parking_label_color: rgb(10,109,222)
  landuse_military_label_color: rgb(242,245,252)
  landuse_military_label_outline_color: rgba(131,129,156,.58)
  landuse_peak_label_color: rgb(250,254,255)
  landuse_peak_label_outline_color: rgba(120,107,103,.47)

  island_color: rgb(250,253,255)
  island_outline_color: rgba(81,87,4, .39)

  state_boundary_text_color: rgb(200, 200, 200)
  country_boundary_color: [
  [4, 'rgb(160, 160, 180)'],
  [5, 'rgb(120, 120, 140)'],
  [6, 'rgb(100, 100, 120)'],
  [7, 'rgb(100, 100, 120)'],
  [8, 'rgb(80, 80, 100)'],
  [9, 'rgb(60, 60, 80)']
  ]
  country_boundary_outline_color: [
  [3, 'rgba(190, 190, 190, 0.1)'],
  [4, 'rgba(180, 180, 180, 0.15)'],
  [5, 'rgba(150, 150, 150, 0.15)'],
  [6, 'rgba(130, 130, 130, 0.15)'],
  [8, 'rgba(110, 110, 110, 0.15)']
  ]
  country_disputed_boundary_color: [
  [4, 'rgb(160,160,180)'],
  [5, 'rgb(120,120,140)'],
  [6, 'rgb(100,100,120)'],
  [7, 'rgb(100,100,120)'],
  [8, 'rgb(80,80,100)'],
  [9, 'rgb(60,60,80 )']
  ]
  country_disputed_boundary_background_color: [.50, .50, .50, .15]
  region_boundary_color: [ # applies to states and regions
  [3, 'rgb(225, 225, 225)'],  # 0 <= $zoom < 4
  [4, 'rgb(195, 195, 215)'],  # 4 <= $zoom < 5
  [5, 'rgb(210, 210, 210)'],  # 5 <= $zoom < 6
    # 6 <= $zoom < 12 (duplicates avoid interpolation)
  [6, 'rgb(180, 180, 180)'],
  [7, 'rgb(180, 180, 180)'],
  [8, 'rgb(180, 180, 180)'],
  [9, 'rgb(180, 180, 180)'],
  [10, 'rgb(180, 180, 180)'],
  [11, 'rgb(180, 180, 180)'],
  [12, 'rgb(170, 170, 170)']  # 12 <= $zoom
  ]
  region_boundary_outline_color: [ # applies to states and regions
  [4, 'rgba(220, 220, 220, 0.06)'], # 0 <= $zoom < 5
  [5, 'rgba(215, 215, 215, 0.06)'], # 5 <= $zoom < 6
  [6, 'rgba(200, 200, 200, 0.1)'],  # 6 <= $zoom < 7
    # 7 <= $zoom < 12 (duplicates avoid interpolation)
  [7, 'rgba(200, 200, 200, 0.16)'],
  [8, 'rgba(200, 200, 200, 0.16)'],
  [9, 'rgba(200, 200, 200, 0.16)'],
  [10, 'rgba(200, 200, 200, 0.16)'],
  [11, 'rgba(200, 200, 200, 0.16)'],
  [12, 'rgba(200, 200, 200, 0.2)'] # 12 <= $zoom
  ]

  building_label_color: rgb(243,243,243)
  building_label_outline_color: rgba(86,105,112,.4)

  #global road colours
  highway_fill: [
    [9, 'rgba(235, 148, 182, .8)'],
    [10, 'rgba(229, 137, 175, .8)'],
    [11, 'rgba(229, 137, 175, .7)'],
    [12, 'rgba(239, 151, 187, .6)'],
    [13, 'rgba(240, 144, 179, .5)']
  ]
  highway_tunnel_fill: rgba(204, 169, 183, .8)
  highway_tunnel_center_line: rgb(204, 129, 160)
  highway_outline: rgba(184, 78, 122, .8)
  highway_centerline_fill: [
    [11, 'rgb(224, 134, 170)'],
    [12, 'rgb(219, 117, 156)'],
    [13, 'rgb(211, 106, 154)'],
    [14, 'rgb(212, 115, 155)']
  ]
  highway_width: [[6, 1.5px], [7, 2px], [8, 2px], [9, 3px], [11, 4px], [12, 5px], [13, 5.5px], [14, 7px], [15, 10px], [16, 14px], [17, 18px], [18, 35px], [19, 45px], [20, 70px]]
  highway_link_trunk_width: [[6, 1.5px], [7, 2px], [9, 2px], [10, 3px], [12, 3.5px], [13, 4px], [14, 6px], [15, 10px], [16, 14px], [17, 17px], [18, 36px], [19, 40px], [20, 64px]]

  major_road_fill: [
    [11, 'rgba(255, 184, 163, .8)'],
    [12, 'rgba(255, 181, 160, .65)'],
    [13, 'rgba(255, 174, 158, .5)']
  ]
  major_road_tunnel_fill: rgba(204, 177, 169, .65)
  major_road_outline: [
    [10, 'rgba(204, 105, 96, .8)'],
    [11, 'rgba(191, 99, 90, .65)'],
    [12, 'rgba(191, 99, 116, .5)']
  ]
  major_road_width: [[9, 2px], [10, 3px], [12, 3.5px], [13, 4px], [14, 6px], [15, 7px], [16, 11px], [17, 15px], [18, 34px], [19, 38px], [20, 62px]]

  major_road_secondary_fill: [
    [10, 'rgba(232, 220, 107, .8)'],
    [12, 'rgba(255, 252, 140, .6)'],
    [13, 'rgba(255, 252, 168, .5)'],
  ]
  major_road_secondary_tunnel_fill: rgba(204, 201, 169, .5)
  major_road_secondary_outline: rgba(191, 157, 134, .5)
  major_road_secondary_width: [[10, 1.5px], [11, 2px], [13, 3.5px], [14, 5px], [15, 7px], [16, 11px], [17, 12px], [18, 30px], [19, 34px], [20, 54px]]

  major_road_tertiary_fill: rgba(150, 150, 150, .7)
  major_road_tertiary_tunnel_fill: rgba(130, 130, 130, .7)
  major_road_tertiary_outline: rgba(120, 120, 120, .7)
  major_road_tertiary_width: [[12, 2px], [13, 3.5px], [14, 4px], [15, 6px], [16, 10px], [18, 26px], [19, 30px], [20, 46px]]

  minor_road_residential_fill: rgba(100, 100, 110, .7)
  minor_road_residential_tunnel_fill: rgba(90, 90, 100, .7)
  minor_road_residential_outline: rgba(85, 85, 95, .7)
  minor_road_width: [[14, 2.5px], [15, 3.5px], [17, 7px], [18, 20px], [19, 26px], [20, 46px]]
  minor_road_service_fill: rgba(85, 85, 95, .7)
  minor_road_service_tunnel_fill: rgba(75, 75, 85, .7)
  minor_road_service_outline: rgba(70, 70, 80, .7)
  minor_road_unpaved_fill: rgba(85, 85, 95, .7)

  tunnel_order: 305
  bridge_outline: rgb(70, 70, 70)

  path_pedestrian: rgb(175, 178, 182)
  path_footway: rgb(120, 150, 120)
  path_footway_tunnel_fill: rgb(190,190,190)
  path_footway_cemetery: rgb(179,185,184)
  path_footway_forest: rgb(177,180,184)
  path_footway_park: rgb(168,194,162)

  ferry_line_color: rgb(67,141,218)
  ferry_label_color: rgb(153,206,255)
  ferry_tunnel_color: rgb(30,48,65)
  ferry_label_outline_color: rgb(48,124,207)

  #global railway colors
  rail_dash_background_color: rgb(70, 70, 70)
  rail_outline_color: rgb(70, 70, 70)
  rail_dash_color: 'rgb(190, 190, 190)'
  # global road labels colours
  road_label_fill_colour: rgb(247, 247, 247)
  road_label_stroke_colour: rgb(70, 70, 70)
  #global label colours
  text_fill: rgb(247, 247, 247)
  text_outline: rgba(86,105,112,.4)
  text_fill_address: rgb(250,250,250)

  traffic_outline_custom_width: 0px

textures:
  icon_library:
    url: icons/sprite-2x.png
    # filtering: mipmap
    density: 2
    sprites:
      area-icon-day--emergency_firstaid: [0, 40, 56, 56]
      area-icon-day--facilities_education: [192, 56, 56, 56]
      area-icon-day--facilities_harbor: [80, 0, 56, 56]
      area-icon-day--industrial_complex: [136, 0, 56, 56]
      area-icon-day--leisure_amusement: [0, 96, 56, 56]
      area-icon-day--leisure_zoo: [56, 96, 56, 56]
      area-icon-day--shopping_main: [112, 96, 56, 56]
      area-icon-day--sport_golfcourse: [192, 0, 56, 56]
      area-icon-day--sport_main: [112, 152, 56, 56]
      area-icon-day--transport_airport: [0, 152, 56, 56]
      city-center--capital_day: [80, 56, 26, 26]
      city-center--circle_day: [162, 56, 26, 26]
      city-center--square_day: [136, 56, 26, 26]
      lane-arrow-day--arrow: [56, 152, 56, 56]
      shields--generic: [192, 112, 56, 40]
      shields--generic-1.5x: [0, 0, 80, 40]
fonts:
  FiraGO:
    - weight: normal
      url: ../fonts/FiraGO-Map.woff
    - weight: normal
      style: italic
      url: ../fonts/FiraGO-Italic.woff
  DroidSans:
    - weight: normal
      url: ../fonts/DroidSansFallback.woff
    - weight: normal
      style: italic
      url: ../fonts/DroidSansFallback.woff

styles:
  shields:
    base: points
    blend_order: 1
    draw:
      visible: global.shields_visible
      texture: icon_library
      sprite: |
        # TODO: We must use shield_text instead of ref when using different road shield icons
        function(){
          if (feature.ref.length > 3) {
            return 'shields--generic-1.5x';
          } else {
            return 'shields--generic';
          }
        }
      size: [[6, 110%],[15, 120%]]
      repeat_group: shields
      repeat_distance: [[10, 150px],[13, 200px],[20, 70px]]
      placement: midpoint
      placement_min_length_ratio: 0.1
      text:
        anchor: center
        # TODO: We must use shield_text instead of ref when using different road shield icons
        text_source: ref
        font:
          fill: global.text_fill
          family: global.text_font_family
          weight: 450
          size: [[6, 8px], [15, 10px], [20, 13px]]
  icon_library:
    base: points
    texture: icon_library
    blend_order: 1
    draw:
      size: global.icon_size
      sprite_default: generic
      buffer: 3px
      text:
        text_source: global.ux_language_text_source
        anchor: [top-right, top-left, bottom-right, bottom-left, top, bottom]
        buffer: 3px
        text_wrap: 18
        max_lines: 3
        font:
          family: global.text_font_family
          weight: normal
          fill: global.text_fill
          size: [[13, 10px], [14, 11px], [17, 12px], [19, 12px], [20, 14px]]
          stroke: { color: global.text_outline, width: [[12, 3px],[16, 4px]] }
  text-blend-order:
    base: text
    blend_order: 1
  disputed_boundary-style:
    base: lines
    blend: overlay
    dash: [5, 5]
    draw:
      color: global.country_disputed_boundary_color
      join: miter
      width: [[0, '1px'], [9, '2px']]
      outline:
        style: translucent-lines
        join: miter
        color: global.country_disputed_boundary_background_color
        width: [[3, '0px'], [4, '1px'], [5, '2px'], [7, '3px']]
  rail-style:
    base: lines
    dash: [7, 7]
    dash_background_color: global.rail_dash_background_color
    draw:
      width: [[15, 1px], [16, 1.5px], [17, 1.5px], [18, 2px], [19, 2.5px]]
      color: global.rail_dash_color
      outline:
        color: global.rail_outline_color
        width: [[10, .1px], [13, .5px], [14, .8px]]
  under_construction-style:
    base: lines
    dash: [2, 2]
  pedestrian-style:
    base: lines
    dash: [1, 1]
    draw:
      width: [[11, 1px], [15, 1px], [16, 4px]]
      color: global.path_pedestrian
  ferry-style:
    base: lines
    dash: [5, 3]
    draw:
      color: global.ferry_line_color
      width: 1px
  tunnel-style:
    base: lines
    dash: [10, 10]
    dash_background_color: global.ferry_tunnel_color
    draw:
      color: rgb(153, 153, 153)
  translucent-polygons:
    base: polygons
    blend: translucent
  translucent-lines:
    base: lines
    blend: translucent
  center-lines:
    base: lines
    blend: opaque
  bridge:
    base: lines
    blend: translucent
    draw:
      # order: global.feature_order
      order: 430
      cap: butt
      outline:
        cap: butt
        width: [[14, 0px], [16, 1.5px], [17, 2px]]
        color: global.bridge_outline
  roads-style:
    base: lines
    blend: translucent
    draw:
      order: 340
      join: bevel
      cap: global.roads_cap
      width: 1px
      outline:
        order: 352
        join: bevel
        cap: global.roads_cap
  road_labels-style:
    base: text
    blend_order: 1
    draw:
      visible: global.text_visible_roads
      text_source: global.ux_language_text_source
      font:
        fill: global.text_fill
        family: global.text_font_family
        stroke:
          color: global.text_outline
          width: 1.5px
  major_road_tertiary-style:
    mix: roads-style
    min_render_zoom: global.min_render_zooms.major_road_tertiary
  major_road_tertiary_bridge-style:
    mix: bridge
    min_render_zoom: global.min_render_zooms.major_road_tertiary
  major_road_tertiary_labels-style:
    mix: road_labels-style
    min_render_zoom: global.min_render_zooms.major_road_tertiary
  minor_road-style:
    mix: roads-style
    # This must only be used in its own style. It will
    # affect all data of the same style per tile. I.e.
    # using this in roads-style directly would also affect
    # majors roads if minor roads are present on the same
    # tile.
    min_render_zoom: global.min_render_zooms.minor_road
  minor_road_bridge-style:
    mix: bridge
    min_render_zoom: global.min_render_zooms.minor_road
  minor_road_labels-style:
    mix: road_labels-style
    min_render_zoom: global.min_render_zooms.minor_road
  places-style:
    base: text
    blend_order: 1
    draw:
      text_source: global.ux_language_text_source
      buffer: 3px
      offset: [0px, 0px]
      font:
        family: global.text_font_family
        fill: global.text_fill
  populated-places-style:
    mix: [places-style, icon_library]
    draw:
      points:
        visible: global.icon_visible_populated_places
        size: [[9, 8px], [10, 0px]]
        sprite: city-center--circle_day
        priority: 30
      text:
        visible: global.text_visible_populated_places
        anchor: [top-right, top-left, bottom-right, bottom-left, top, bottom]
        buffer: 3px
        offset: [0px, 0px]
        font:
          fill: global.text_fill
          size: [[5, 9px], [8, 10px], [12, 11px]]
          stroke:
            color: global.text_outline
            width: 2px

layers:
  satellite:
    data: { source: here-satellite }
    draw:
      raster:
        order: 0
  landuse:
    filter: global.feature_min_zoom_filter
    data: {source: omv, layer: landuse}
    label:
      filter:
        all:
          - $geometry: point
      draw:
        text-blend-order:
          text_source: global.ux_language_text_source
          priority: global.feature_order
          text_wrap: 18
          font:
            fill: global.landuse_default_label_color
            family: global.text_font_family
            weight: normal
            size: global.landuse_label_size
            stroke:
              color: global.landuse_default_label_outline_color
              width: 2px
      park:
        filter:
          kind: park
        draw:
          text-blend-order:
            font:
              fill: global.landuse_park_label_color
              stroke:
                color: global.landuse_park_label_outline_color
      forest-national-park:
        filter:
          kind: [forest, national_park, nature_reserve]
        draw:
          text-blend-order:
            font:
              fill: global.landuse_forest_label_color
              stroke:
                color: global.landuse_forest_label_outline_color
      pedestrian:
        filter:
          kind: pedestrian
        draw:
          text-blend-order:
            font:
              fill: global.landuse_pedestrian_label_color
              stroke:
                color: global.landuse_pedestrian_label_outline_color
      beach:
        filter:
          kind: beach
        draw:
          text-blend-order:
            font:
              fill: global.landuse_beach_label_color
              stroke:
                color: global.landuse_beach_label_outline_color
      military:
        filter:
          kind: military
        draw:
          text-blend-order:
            font:
              fill: global.landuse_military_label_color
              stroke:
                color: global.landuse_military_label_outline_color
      peak:
        filter:
          kind: peak
        draw:
          text-blend-order:
            font:
              fill: global.landuse_peak_label_color
              stroke:
                color: global.landuse_peak_label_outline_color
      other:
        filter:
          kind: [industrial, railway, parking]
        draw:
          text-blend-order:
            font:
              fill: global.landuse_gray_label_color
              stroke:
                color: global.landuse_gray_label_outline_color
      with-icon:
        filter:
          kind: [sports_centre, commercial, zoo, theme_park, hospital, aerodrome, golf_course, university]
        draw:
          icon_library:
            priority: global.feature_order
            text:
              anchor: [top, bottom, left, right]
              text_wrap: 18
              font:
                fill: global.landuse_default_label_color
                size: global.landuse_label_size
                stroke:
                  color: global.landuse_default_label_outline_color
                  width: 1px
        sports_centre:
          filter:
            kind: sports_centre
          draw:
            icon_library:
              sprite: area-icon-day--sport_main
              text:
                font:
                  fill: global.landuse_default_label_color
                  stroke:
                    color: global.landuse_default_label_outline_color
        commercial:
          filter:
            kind: commercial
          draw:
            icon_library:
              sprite: area-icon-day--shopping_main
              text:
                font:
                  fill: global.landuse_gray_label_color
                  stroke:
                    color: global.landuse_gray_label_outline_color
        zoo:
          filter:
            kind: zoo
          draw:
            icon_library:
              sprite: area-icon-day--leisure_zoo
              text:
                font:
                  fill: global.landuse_gray_label_color
                  stroke:
                    color: global.landuse_gray_label_outline_color
        theme_park:
          filter:
            kind: theme_park
          draw:
            icon_library:
              sprite: area-icon-day--leisure_amusement
              text:
                font:
                  fill: global.landuse_gray_label_color
                  stroke:
                    color: global.landuse_gray_label_outline_color
        hospital:
          filter:
            kind: hospital
          draw:
            icon_library:
              sprite: area-icon-day--emergency_firstaid
              text:
                font:
                  fill: global.landuse_hospital_label_color
                  stroke:
                    color: global.landuse_hospital_label_outline_color
        aerodrome:
          filter:
            kind: aerodrome
          draw:
            icon_library:
              sprite: area-icon-day--transport_airport
              text:
                font:
                  fill: global.landuse_gray_label_color
                  stroke:
                    color: global.landuse_gray_label_outline_color
        golf:
          filter:
            kind: golf_course
          draw:
            icon_library:
              sprite: area-icon-day--sport_golfcourse
              text:
                font:
                  fill: global.landuse_golf_course_label_color
                  stroke:
                    color: global.landuse_golf_course_label_outline_color
        university:
          filter:
            kind: university
          draw:
            icon_library:
              sprite: area-icon-day--facilities_education
              text:
                font:
                  fill: global.landuse_university_label_color
                  stroke:
                    color: global.landuse_university_label_outline_color
  water:
    data: {source: omv, layer: water}
    water-labels:
      filter:
        all:
          - name: true
      draw:
        text-blend-order:
          text_source: global.ux_language_text_source
          visible: global.text_visible_water_labels
          priority: 8
          font:
            fill: global.water_label_sea_color
            family: global.text_font_family
            weight: normal
            size: [[4, 11px], [5, 12px], [6, 12px], [7, 13px], [8, 14px]]
            style: italic
            stroke:
              color: global.water_label_outline_color
              width: 2px
      ocean-labels:
        filter:
          all:
            - kind: [ocean] # note enough due to OLPRPS-3988
            - function() {return (feature.name && feature.name.indexOf('Ocean') != -1) || feature['name:en'] && feature['name:en'].indexOf('Ocean') != -1}
        draw:
          text-blend-order:
            text_source: global.ux_language_text_source_ocean
            text_wrap: false
            priority: 1
            font:
              fill: global.water_label_ocean_color
              size: [[0, 10px], [1, 11px], [2, 13px], [3, 14px], [4, 16px], [6, 16px], [7, 17px], [8, 20px]]
              style: italic
      bay-labels:
        filter:
          all:
            - kind: [bay]
            - global.feature_min_zoom_filter
        draw:
          text-blend-order:
            font:
              fill: global.water_label_bay_color
              size: [[11, 10px], [12, 11px], [15, 11px], [16, 12px]]
              stroke:
                color: global.water_label_bay_outline_color
      lake-labels:
        filter:
          all:
            - kind: [lake]
            - global.feature_min_zoom_filter
        draw:
          text-blend-order:
            font:
              fill: global.water_label_lake_color
              family: global.text_font_family
              size: [[11, 10px], [12, 11px], [15, 11px], [16, 12px]]
              stroke:
                color: global.water_label_lake_outline_color
      water-line-labels:
        filter:
          all:
            - $geometry: line
            - global.feature_min_zoom_filter
        draw:
          text-blend-order:
            font:
              style: italic
        river:
          filter:
            kind: river
          draw:
            text-blend-order:
              priority: 8
  boundaries:
    filter: global.feature_min_zoom_filter
    data: { source: omv, layer: boundaries }
    draw:
      translucent-lines:
        order: global.feature_order
    border-labels:
      filter: {$zoom: { min: 8 }}
      draw:
        text-blend-order:
          priority: 2
          visible: global.text_visible_admin
          text_source: global.ux_language_text_source_boundary_lines_left_right
          offset: [0px, 5px]
          text_wrap: 100
          font:
            family: global.text_font_family
            size: 9px
            fill: global.text_fill
            transform: uppercase
            stroke: { color: global.text_outline, width: 3px }
      no-left-right:
        filter: { "name:left": false, "name:right": false }
        draw:
          text-blend-order:
            text_source: global.ux_language_text_source_boundary_lines
            offset: [0px, 0px]
    country:
      filter:
        kind: country
      draw:
        translucent-lines:
          color: global.country_boundary_color
          width: 1px
          outline:
            color: global.country_boundary_outline_color
            width: [[3, '0px'], [4, '2px'], [7, '3px']]
    other_boundary_disputed_etc:
      filter: { kind: [disputed, indefinite, indeterminate, lease_limit, line_of_control, overlay_limit] }
      draw:
        disputed_boundary-style:
          order: global.feature_order
    state:
      filter:
        all:
          - kind: [state, region]
          - kind_detail: [3,4]
      draw:
        translucent-lines:
          color: global.region_boundary_color
          width: 1px
          outline:
            color: global.region_boundary_outline_color
            width: [[0, '0px'], [3, '0px'], [9, '1px']]
        text-blend-order:
          font:
            fill: global.state_boundary_text_color
  roads:
    data: {source: omv, layer: roads}
    shields:
      filter:
        all:
          - kind: [highway, major_road, minor_road]
          - ref: true
          - global.feature_min_zoom_filter
      draw:
        shields:
          priority: 45
          visible: false
      default_priority_motorway:
        filter:
          kind_detail: motorway
        draw:
          shields:
            priority: 40
            visible: global.shields_visible
      default_priority_trunk:
        filter:
          all:
            - kind_detail: trunk
        draw:
          shields:
            priority: 41
            visible: global.shields_visible
      default_priority_primary:
        filter:
          kind_detail: primary
        draw:
          shields:
            priority: 42
            visible: global.shields_visible
      default_priority_secondary:
        filter:
          kind_detail: secondary
        draw:
          shields:
            priority: 43
            visible: global.shields_visible
      default_priority_tertiary:
        filter:
          kind_detail: tertiary
        draw:
          shields:
            priority: 44
            visible: global.shields_visible
      default_minor_road:
        filter:
          kind: minor_road
        draw:
          shields:
            priority: 45
            visible: global.shields_visible
    directions:
      filter:
        all:
          - $zoom: { min: 16 }
          - oneway: yes
          - under_construction: false
      draw:
        points:
          priority: 500
          texture: icon_library
          sprite: lane-arrow-day--arrow
          placement: spaced
          size: 26px
          placement_spacing: 150px
          angle: auto
          flat: true
    rail:
      filter:
        all:
          - kind: rail
          - under_construction: false
          - global.min_zoom_filter.rail
      draw:
        rail-style:
          order: global.feature_order
    highway:
      filter:
        all:
          - kind: highway
      draw:
        roads-style:
          order: global.feature_order
          color: global.highway_fill
          width: global.highway_width
          outline:
            color: global.highway_outline
            width: function() { return ($zoom >= 8 && '.5px') || '0px'; }
        center-lines:
          order: function(){return feature.sort_rank+0.5}
          color: global.highway_centerline_fill
          width: [[10, 0px], [11, 1px]]
      bridge:
        filter:
          is_bridge: true
        draw:
          bridge:
            color: global.highway_fill
            width: global.highway_width
      tunnel:
        filter:
          is_tunnel: true
        draw:
          roads-style:
            order: global.tunnel_order
            color: global.highway_tunnel_fill
          center-lines:
            order: global.tunnel_order
            color: global.highway_tunnel_center_line
      link:
        filter:
          is_link: true
        draw:
          roads-style:
            width: global.highway_link_trunk_width
          center-lines:
            visible: false
        bridge:
          filter:
            is_bridge: true
          draw:
            bridge:
              width: global.highway_link_trunk_width
        tunnel:
          filter:
            is_tunnel: true
          draw:
            roads-style:
              order: global.tunnel_order
              color: global.highway_tunnel_fill
      trunk:
        filter:
          kind_detail: trunk
        draw:
          roads-style:
            width: global.highway_link_trunk_width
            color: global.major_road_fill
            outline:
              width: function() { return ($zoom >= 9 && '.5px') || '0px'; }
          center-lines:
            visible: false
        bridge:
          filter:
            is_bridge: true
          draw:
            bridge:
              color: global.major_road_fill
              width: global.highway_width
        tunnel:
          filter:
            is_tunnel: true
          draw:
            roads-style:
              order: global.tunnel_order
              color: global.major_road_tunnel_fill
      under_construction:
        filter:
          under_construction: true
        draw:
          roads-style:
            visible: false
          center-lines:
            visible: false
          under_construction-style:
            order: global.feature_order
            width: global.highway_width
            color: global.highway_fill
    major_road:
      filter:
        all:
          - kind: major_road
      primary:
        filter:
          all:
            - kind_detail: [primary, primary_link]
        draw:
          roads-style:
            color: global.major_road_fill
            order: global.feature_order
            width: global.major_road_width
            outline:
              color: global.major_road_outline
              width: function() { return ($zoom >= 9 && '.5px') || '0px'; }
        bridge:
          filter:
            is_bridge: true
          draw:
            bridge:
              color: global.major_road_fill
              width: global.major_road_width
        tunnel:
          filter:
            is_tunnel: true
          draw:
            roads-style:
              order: global.tunnel_order
              color: global.major_road_tunnel_fill
        link:
          filter:
            is_link: true
          draw:
            roads-style:
              color: global.major_road_fill
              width: [[13, 3px],[17, 8px],[18, 18px],[19, 23px],[20, 35px]]
      secondary:
        filter:
          all:
            - kind_detail: [secondary, secondary_link]
        draw:
          roads-style:
            color: global.major_road_secondary_fill
            order: global.feature_order
            width: global.major_road_secondary_width
            outline:
              color: global.major_road_secondary_outline
              width: function() { return ($zoom >= 11 && '.5px') || '0px'; }
        link:
          filter:
            is_link: true
          draw:
            roads-style:
              color: global.major_road_secondary_fill
              width: [[13, 3px],[17, 8px],[18, 18px],[19, 23px],[20, 35px]]
        bridge:
          filter:
            is_bridge: true
          draw:
            bridge:
              color: global.major_road_secondary_fill
              width: global.major_road_secondary_width
        tunnel:
          filter:
            is_tunnel: true
          draw:
            roads-style:
              order: global.tunnel_order
              color: global.major_road_secondary_tunnel_fill
        under_construction:
          filter:
            under_construction: true
          draw:
            roads-style:
              visible: false
            under_construction-style:
              order: global.feature_order
              width: global.major_road_secondary_width
              color: global.major_road_secondary_fill
      tertiary:
        filter:
          all:
            - kind_detail: [tertiary, tertiary_link]
        draw:
          major_road_tertiary-style:
            color: global.major_road_tertiary_fill
            order: global.feature_order
            width: global.major_road_tertiary_width
            outline:
              color: global.major_road_tertiary_outline
              width: function() { return ($zoom >= 11 && '.5px') || '0px'; }
        bridge:
          filter:
            is_bridge: true
          draw:
            major_road_tertiary_bridge-style:
              color: global.major_road_tertiary_fill
              width: global.major_road_tertiary_width
        tunnel:
          filter:
            is_tunnel: true
          draw:
            major_road_tertiary-style:
              order: global.tunnel_order
              color: global.major_road_tertiary_tunnel_fill
        under_construction:
          filter:
            under_construction: true
          draw:
            major_road_tertiary-style:
              visible: false
            under_construction-style:
              order: 342
              width: global.major_road_tertiary_width
              color: global.major_road_tertiary_fill
    minor_road:
      filter:
        all:
          - kind: minor_road
          - global.min_zoom_filter.minor_road
      residential:
        filter:
          kind_detail: residential
        draw:
          minor_road-style:
            order: global.feature_order
            color: global.minor_road_residential_fill
            width: global.minor_road_width
            outline:
              color: global.minor_road_residential_outline
              width: [[13, 0px], [14, 1px]]
        bridge:
          filter:
            is_bridge: true
          draw:
            minor_road_bridge-style:
              color: global.minor_road_residential_fill
              width: global.minor_road_width
        tunnel:
          filter:
            is_tunnel: true
          draw:
            minor_road-style:
              order: global.tunnel_order
              color: global.minor_road_residential_tunnel_fill
      service:
        filter:
          kind_detail: [service, unclassified, road]
        draw:
          minor_road-style:
            color: global.minor_road_service_fill
            width: global.minor_road_width
            outline:
              color: global.minor_road_service_outline
              width: [[13, 0px], [14, 1px]]
        bridge:
          filter:
            is_bridge: true
          draw:
            minor_road_bridge-style:
              color: global.minor_road_service_fill
              width: global.minor_road_width
        tunnel:
          filter:
            is_tunnel: true
          draw:
            minor_road-style:
              order: global.tunnel_order
              color: global.minor_road_service_tunnel_fill
      unpaved:
        filter: {surface: unpaved}
        draw:
          minor_road-style:
            order: function() {return feature.sort_rank - 0.5}
            color: global.minor_road_unpaved_fill
    path:
      filter:
        all:
          - kind: path
          - global.min_zoom_filter.path
      pedestrian:
        filter:
          kind_detail: pedestrian
        draw:
          pedestrian-style:
            order: global.feature_order
      footway:
        filter:
          kind_detail: footway
        draw:
          roads-style:
            order: global.feature_order
            color: global.path_footway
            width: [[14, 1px], [20, 1px]]
        bridge:
          filter:
            is_bridge: true
          draw:
            bridge:
              color: global.path_footway
              width: [[14, 1px], [20, 1px]]
              outline:
                width: [[15, 0px], [16, .5px]]
        tunnel:
          filter:
            is_tunnel: true
          draw:
            roads-style:
              order: global.tunnel_order
              color: global.path_footway_tunnel_fill
        cemetery:
          filter: {landuse_kind: cemetery}
          draw: {roads-style: {color: global.path_footway_cemetery}}
        forest:
          filter: {landuse_kind: forest}
          draw: {roads-style: {color: global.path_footway_forest}}
        park:
          filter: {landuse_kind: park}
          draw: {roads-style: {color: global.path_footway_park}}
    ferry:
      filter:
        all:
          - kind: ferry
      draw:
        ferry-style:
          order: global.feature_order
      tunnel:
        filter:
          is_tunnel: true
        draw:
          tunnel-style:
            order: global.feature_order

  road_labels:
    data: {source: omv, layer: road_labels}
    highway:
      filter:
        all:
          - kind: highway
      draw:
        road_labels-style:
          priority: 49
          font:
            fill: global.road_label_fill_colour
            size: [[10, 14px], [20, 22px]]
      link:
        filter:
          kind_detail: motorway_link
        draw:
          road_labels-style:
            priority: 49
            font:
              fill: global.road_label_fill_colour
              size: [[10, 14px], [20, 22px]]
      trunk:
        filter:
          kind_detail: trunk
        draw:
          road_labels-style:
            priority: 49
            font:
              fill: global.road_label_fill_colour
              size: [[10, 14px], [20, 22px]]
    major_road:
      filter:
        kind: major_road
      primary:
        filter:
          all:
            - kind_detail: primary
        draw:
          road_labels-style:
            priority: 50
            offset: [[16, [0px, -1px]], [18, [0px, -2px]]]
            font:
              fill: global.road_label_fill_colour
              stroke:
                color: global.road_label_stroke_colour
                width: 2px
              size: [[14, 13.5px], [15, 14.5px], [16, 17px], [17, 22px]]
      secondary:
        filter:
          all:
            - kind_detail: secondary
        draw:
          road_labels-style:
            priority: 51
            offset: [[16, [0px, -1px]], [17, [0px, -3px]]]
            font:
              fill: global.road_label_fill_colour
              stroke:
                color: global.road_label_stroke_colour
                width: 2px
              size: [[14, 12px], [15, 15px], [16, 17px], [17, 21px]]
      tertiary:
        filter:
          all:
            - kind_detail: tertiary
        draw:
          major_road_tertiary_labels-style:
            priority: 52
            font:
              fill: global.road_label_fill_colour
              stroke:
                color: global.road_label_stroke_colour
                width: 2px
              size: [[13, 10px], [16, 13.5px], [17, 18px], [18, 24px]]
    minor_road:
      filter:
        all:
          - kind: minor_road
          - global.min_zoom_filter.minor_road
      draw:
        minor_road_labels-style:
          offset: [[16, [0px, -1px]], [18, [0px, -2px]]]
          priority: 53
          font:
            fill: global.road_label_fill_colour
            stroke:
              color: global.road_label_stroke_colour
              width: 2px
            size: [[14, 10px], [16, 12px], [18, 19px], [20, 24px]]
      service:
        filter:
          kind_detail: [service, unclassified, road]
        draw:
          minor_road_labels-style:
            priority: 54
            font:
              fill: global.road_label_fill_colour
              stroke:
                color: global.road_label_stroke_colour
                width: 2px
              size: [[16, 10px], [20, 16px]]
    path:
      filter:
        all:
          - kind: path
          - global.min_zoom_filter.path
      draw:
        road_labels-style:
          offset: [0px,-2px]
          priority: 55
          font:
            fill: global.road_label_fill_colour
            stroke:
              color: global.road_label_stroke_colour
              width: 2px
            size: 12px
      unpaved:
        filter: {surface: unpaved}
        draw:
          road_labels-style:
            font:
              fill: global.road_label_fill_colour
              stroke:
                color: global.road_label_stroke_colour
      footway:
        filter:
          all:
            - kind_detail: footway
            - $zoom: {min: 14, max: 20}
        draw:
          road_labels-style:
            offset: [0px,-5px]
            font:
              fill: global.road_label_fill_colour
              size: 12px
    ferry:
      filter:
        all:
          - kind: ferry
      draw:
        road_labels-style:
          text_source: global.ux_language_text_source
          offset: [0px, -12px]
          visible: global.text_visible_ferry
          priority: 49
          font:
            fill: global.road_label_fill_colour
            stroke:
              color: global.road_label_stroke_colour
              width: 2px
            size: [[14,11px], [16,12px], [17,13px]]
      tunnel:
        filter:
          is_tunnel: true
        draw:
          road_labels-style:
            font:
              fill: global.road_label_fill_colour
              stroke:
                color: grey
  buildings:
    data: {source: omv, layer: buildings}
    labels:
      filter:
        all:
          - { $zoom: { min: 17 } }
          - not: { kind: address }
          - name: true
      draw:
        text-blend-order:
          visible: global.text_visible_building
          text_source: global.ux_language_text_source
          anchor: center
          font:
            fill: global.building_label_color
            family: global.text_font_family
            size: [[15, 11px], [16, 12px]]
            stroke:
              color: global.building_label_outline_color
              width: 1px
    address-labels:
      filter:
        all:
          - $zoom: { min: 18 }
          - kind: address
      draw:
        text-blend-order:
          visible: global.text_visible_address
          priority: 60
          text_source: addr_housenumber
          font:
            fill: global.text_fill_address
            family: global.text_font_family
            size: [[18, 12px],[22, 16px]]
  continent_label:
    data: {source: omv, layer: earth}
    filter:
      all:
        - kind: continent
        - global.feature_min_zoom_filter
    draw:
      text-blend-order:
        collide: true
        text_source: global.ux_language_text_source
        priority: 1
        blend: overlay
        blend_order: 1
        anchor: center
        font:
          transform: uppercase
          fill: rgb(250, 253, 255)
          stroke:
            color: rgb(50, 50, 50)
            width: 1px
          family: global.text_font_family
          weight: normal
          size: 19px
  places:
    data: {source: omv, layer: places}
    filter:
      all:
        - global.feature_min_zoom_filter
        - name: true
    country:
      filter:
        kind: country
      draw:
        places-style:
          priority: 3
          visible: global.text_visible_admin
          anchor: center
          font:
            transform: uppercase
            fill: rgb(180, 180, 180)
            stroke:
              color: rgb(80, 80, 80)
              width: 3px
            size: [[3, 11px], [4, 12px], [5, 15px], [6, 17px], [7, 18px]]
      large_country_label:
        filter:
          iso_code: [US, CA, RU, CN, IN, ID, AU]
        draw:
          places-style:
            font:
              size: [[3, 14px], [5, 15px], [6, 20px], [7, 26px], [8, 28px]]
    region:
      filter:
        all:
          - kind: region
          - $zoom: {max: 13}
      draw:
        places-style:
          # Does not work due to OLPRPS-3721
          # text_source: global.ux_language_text_source_short
          priority: 4
          visible: global.text_visible_admin
          font:
            transform: uppercase
            size: [[3, 11px], [4, 12px], [5, 15px], [19, 16px]]
            fill: rgba(235, 240, 242, 0.9)
            stroke:
              color: rgba(50, 50, 50, 0.2)
              width: 2px
    populated-places:
      filter:
        all:
          - kind: locality
          - $zoom: {min: 3}
      draw:
        populated-places-style:
          size: [[9, 8px], [10, 0px]]
          sprite: city-center--circle_day
          buffer: -10px
      population-1m-up:
        filter:
          all:
            - population: global.population.class1-1m-up
        draw:
          populated-places-style:
            priority: 6
            text:
              font:
                fill: global.place_class1_color
                size: [[4, 15px], [7, 15px], [8, 17px], [9, 18px], [13, 26px], [14, 0]]
                stroke:
                  color: global.place_class1_outline_color
                  width: [[8, 2px], [9, 3px]]
        capital:
          filter:
            all:
              - country_capital: true
              - $zoom: { max: 14 }
          draw:
            populated-places-style:
              size: [[9, 10px], [10, 0px]]
              sprite: city-center--capital_day
              priority: 5
              text:
                priority: 5
                font:
                  fill: global.place_capital_color
        region-capital:
          filter:
            all:
              - region_capital: true
              - $zoom: { max: 13}
          draw:
            populated-places-style:
              size: [[9, 10px], [10, 0px]]
              sprite: city-center--square_day
              priority: 6
              text:
                priority: 6
        county-capital:
          filter:
            all:
              - county_capital: true
              - $zoom: { max: 14}
          draw:
            populated-places-style:
              size: [[9, 10px], [10, 0px]]
              sprite: city-center--circle_day
              priority: 7
              text:
                priority: 7
      population-250k-1m:
        filter:
          all:
            - population: global.population.class2-250k-1m
        draw:
          populated-places-style:
            priority: 8
            text:
              font:
                fill: global.place_class2_color
                size: [[0, 13px], [7, 13px], [8, 14px], [9, 15px], [10, 17px], [11, 19px], [12, 20px], [13, 22px], [14, 24px], [15, 0]]
                stroke:
                  color: global.place_class2_outline_color
                  width: 2px
        capital:
          filter:
            all:
              - country_capital: true
              - $zoom: { max: 13 }
          draw:
            populated-places-style:
              size: [[9, 8px], [10, 0px]]
              sprite: city-center--capital_day
              priority: 5
              text:
                font:
                  fill: global.place_capital_color
                  stroke:
                    color: global.place_capital_outline_color
        region-capital:
          filter:
            all:
              - region_capital: true
              - $zoom: { max: 13}
          draw:
            populated-places-style:
              size: [[9, 8px], [10, 0px]]
              sprite: city-center--square_day
              priority: 6
              text:
                priority: 6
        county-capital:
          filter:
            all:
              - county_capital: true
              - $zoom: { max: 14}
          draw:
            populated-places-style:
              size: [[9, 8px], [10, 0px]]
              sprite: city-center--circle_day
              priority: 7
              text:
                priority: 7
      population-100k-250k:
        filter:
          all:
            - population: global.population.class3-100k-250k
        draw:
          populated-places-style:
            text:
              font:
                fill: global.place_class3_color
                size: [[0, 0], [4, 0], [5, 11px], [6, 11px], [7, 12px], [8, 12px], [9, 13px], [10, 14px], [11, 15px], [12, 17px], [13, 19px], [14, 21px], [15, 0]]
                stroke:
                  color: global.place_class3_outline_color
                  width: 2px
        capital:
          filter:
            all:
              - country_capital: true
              - $zoom: { max: 13 }
          draw:
            populated-places-style:
              size: [[9, 7px], [10, 0px]]
              sprite: city-center--capital_day
              priority: 5
              text:
                font:
                  fill: global.place_capital_color
                  stroke:
                    color: global.place_capital_outline_color
        region-capital:
          filter:
            all:
              - region_capital: true
              - $zoom: { max: 13 }
          draw:
            populated-places-style:
              size: [[9, 7px], [10, 0px]]
              sprite: city-center--square_day
              priority: 6
              text:
                priority: 6
        county-capital:
          filter:
            all:
              - county_capital: true
              - $zoom: { max: 14}
          draw:
            populated-places-style:
              size: [[9, 7px], [10, 0px]]
              sprite: city-center--circle_day
              priority: 7
              text:
                priority: 7
        city:
          filter:
            kind_detail: city
          draw:
            populated-places-style:
              size: [[9, 7px], [10, 0px]]
              sprite: city-center--circle_day
              priority: 8
              text:
                priority: 8
      population-30k-100k:
        filter:
          all:
            - population: global.population.class4-30k-100k
        draw:
          populated-places-style:
            text:
              font:
                fill: global.place_class4_color
                size: [[0, 0], [4, 0], [5, 10px], [6, 10px], [7, 11px], [9, 11px], [10, 12px], [11, 13px], [12, 15px], [13, 17px], [14, 18px], [15, 0]]
                stroke:
                  color: global.place_class4_outline_color
                  width: 2px
        capital:
          filter:
            all:
              - country_capital: true
              - $zoom: { max: 14 }
          draw:
            populated-places-style:
              size: [[9, 6px], [10, 0px]]
              sprite: city-center--capital_day
              priority: 5
              text:
                font:
                  fill: global.place_capital_color
                  stroke:
                    color: global.place_capital_outline_color
        region-capital:
          filter:
            all:
              - region_capital: true
              - $zoom: { max: 13}
          draw:
            populated-places-style:
              size: [[9, 6px], [10, 0px]]
              sprite: city-center--square_day
              priority: 6
              text:
                priority: 6
        county-capital:
          filter:
            all:
              - county_capital: true
              - $zoom: { max: 14}
          draw:
            populated-places-style:
              size: [[9, 6px], [10, 0px]]
              sprite: city-center--circle_day
              priority: 7
              text:
                priority: 7
        town:
          filter:
            kind_detail: town
          draw:
            populated-places-style:
              size: [[9, 6px], [10, 0px]]
              sprite: city-center--circle_day
              priority: 8
              text:
                priority: 8
      population-until-30k:
        filter:
          all:
            - population: global.population.class5-until-30k
        draw:
          populated-places-style:
            visible: false
            text:
              font:
                fill: global.place_class5_color
                size: [[0, 0], [4, 0], [5, 9px], [6, 9px], [7, 10px], [9, 10px], [10, 11px], [11, 11px], [12, 12px], [13, 14px], [14, 15px], [15, 0]]
                stroke:
                  color: global.place_class5_outline_color
                  width: 1.5px
        capital:
          filter:
            all:
              - country_capital: true
              - $zoom: { max: 14 }
          draw:
            populated-places-style:
              size: [[9, 6px], [10, 0px]]
              visible: true
              sprite: city-center--capital_day
              priority: 5
              text:
                font:
                  fill: global.place_capital_color
                  stroke:
                    color: global.place_capital_outline_color
        region-capital:
          filter:
            all:
              - region_capital: true
              - $zoom: { max: 13}
          draw:
            populated-places-style:
              visible: true
              size: [[9, 6px], [10, 0px]]
              sprite: city-center--square_day
              priority: 6
              text:
                priority: 6
        county-capital:
          filter:
            all:
              - county_capital: true
              - $zoom: { max: 14}
          draw:
            populated-places-style:
              size: [[9, 6px], [10, 0px]]
              sprite: city-center--circle_day
              priority: 7
              text:
                priority: 7
        town:
          filter:
            kind_detail: town
          draw:
            populated-places-style:
              visible: true
              size: [[9, 6px], [10, 0px]]
              sprite: city-center--circle_day
              priority: 8
              text:
                priority: 8
        village:
          filter:
            kind_detail: [village, hamlet]
          draw:
            populated-places-style:
              visible: global.text_visible_populated_places
              size: [[9, 6px], [10, 0px]]
              priority: 9
              font:
                fill: global.place_hamlet_color
                size: [[5, 9px], [8, 10px], [10, 15px], [12, 12px],[14, 18px]]
                stroke:
                  color: global.place_hamlet_outline_color
    neighbourhoods:
      filter:
        all:
          - kind: borough
          - $zoom: { max: 15}
      draw:
        places-style:
          visible: global.text_visible_neighbourhoods
          priority: 12
          buffer: 8px
          max_lines: 2
          font:
            fill: rgb(240, 245, 247)
            size: [[9, 14px], [11, 15px], [13, 22px]]
            stroke:
              color: rgba(45, 45, 60, .70)
              width: 1.5px

  island_label:
    data: {source: omv, layer: earth}
    filter:
      kind: island
      $zoom: { min: 0, max: 15}
    draw:
      text-blend-order:
        text_source: global.ux_language_text_source
        priority: 21
        anchor: center
        font:
          fill: global.island_color
          stroke:
            color: global.island_outline_color
            width: 2px
          family: global.text_font_family
          weight: normal
          size: [[0, 10px], [11, 10px], [12, 11px], [13, 11px], [14, 12px], [15, 12px], [16, 13px]]
